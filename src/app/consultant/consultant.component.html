<link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,500,0,0" />
<link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" />
<div class="flex flex-col items-center w-full h-screen bg-gray-100 p-4">
    <!-- Header -->
    <div class="w-3/4 flex items-center justify-between py-4">
        <p class="text-[#85461F] text-4xl font-bold">Tư vấn</p>
    </div>

    <!-- Content Chat -->
    <div class="consultant-container flex h-screen">
        <!-- Danh sách chat -->
        <div class="chat-list w-110 border-r border-gray-300 p-3 bg-white shadow-md max-h-150">
            <div class="flex items-center border border-gray-300 rounded-full px-3 py-2 mb-2 focus:outline-none focus:ring-2 focus:ring-[#85461F]">
                <span class="material-symbols-outlined text-gray-500">search</span>
                <input type="search" [(ngModel)]="searchText" placeholder="Tìm kiếm" 
                    class="text-sm border-none outline-none bg-transparent w-full px-2">
            </div>
    
            <ul class="overflow-y-auto max-h-130">
                <li *ngFor="let chat of filteredChats(); let i = index" 
                    (click)="setActiveChat(i)" 
                    (mouseenter)="hoveredIndex = i" 
                    (mouseleave)="hoveredIndex = -1"
                    [ngClass]="{'bg-gray-300': activeIndex === i, 'bg-gray-100': hoveredIndex === i && activeIndex !== i}" 
                    class="cursor-pointer p-2 border-b flex items-center rounded-md transition">
                    
                    <img src="assets/avatar.png" class="w-8 h-8 rounded-full">
                    <div class="flex-1 ml-3">
                        <p class="font-bold">{{ chat.name }}</p>
                        <p class="text-gray-600 text-sm truncate">{{ chat.message }}</p>
                    </div>
                    <span class="text-gray-500 text-sm">{{ chat.time }}</span>
                </li>
            </ul>
        </div>
    
        <!-- Khung chat -->
        <div class="chat-box w-220 p-5 bg-white flex flex-col max-h-150 mx-5 shadow-md">
            <div *ngIf="activeIndex >= 0">
                <!-- Header -->
                <div class="flex items-center border-b pb-3 mb-3">
                    <img src="assets/avatar.png" class="w-10 h-10 rounded-full">
                    <div class="ml-3">
                        <p class="text-lg font-bold text-[#85461F]">{{ chats[activeIndex].name }}</p>
                        <p class="text-gray-500">{{ chats[activeIndex].phone || '0123456789' }}</p>
                    </div>
                </div>
    
                <!-- Nội dung tin nhắn -->
                <div class="h-96 overflow-y-auto py-4 flex flex-col space-y-4">
                    <!-- Hiển thị thời gian tin nhắn căn giữa -->
                    <span class="text-gray-500 text-xs block text-center w-full">Thứ 2, 6:10 PM</span>
                    <div class="flex items-start mb-2">
                        <img src="assets/avatar.png" class="w-6 h-6 rounded-full">
                        <div class="bg-gray-100 px-3 py-2 ml-2 rounded-md max-w-sm text-sm">
                            {{ chats[activeIndex].message }}
                        </div>
                    </div>
                </div>
    
                <!-- Ô nhập tin nhắn -->
                <div class="border-t p-3 flex items-center">
                    <button class="text-gray-500 px-2">
                        <span class="material-symbols-outlined text-[#85461F]">link</span>
                    </button>
                    <button class="text-gray-500 px-2">
                        <span class="material-symbols-outlined text-[#85461F]">mood</span>
                    </button>
                    <button class="text-gray-500 px-2">
                        <span class="material-symbols-outlined text-[#85461F]">image</span>
                    </button>
                    <input type="text" class="flex-1 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-[#85461F] px-3 py-2 mx-2" placeholder="Nhập tin nhắn...">
                    <button class="text-[#85461F]">
                        <span class="material-symbols-outlined">send</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    
</div>
