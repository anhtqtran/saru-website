<div class="container mx-auto p-4">
  <!-- Bộ lọc -->
  <div class="flex flex-col md:flex-row gap-6">
    <div class="w-full md:w-1/4 bg-gray-100 p-4 rounded-lg">
      <h2 class="text-xl font-bold mb-4">Filters</h2>

      <!-- Danh mục -->
      <label class="block mb-2">Category</label>
      <select [(ngModel)]="selectedCategory" (change)="onFilterChange()" class="w-full p-2 border rounded">
        <option value="">Tất cả sản phẩm</option>
        <option *ngFor="let category of categories" [value]="category.CateID">
          {{ category.CateName }}
        </option>
      </select>
      
  
      <!-- Giá -->
      <label class="block mt-4">Price Range</label>
      <input type="number" [(ngModel)]="filters.minPrice" placeholder="Min Price" class="w-full p-2 border rounded mb-2">
      <input type="number" [(ngModel)]="filters.maxPrice" placeholder="Max Price" class="w-full p-2 border rounded">
      <button (click)="onFilterChange()" class="mt-2 bg-blue-500 text-white p-2 rounded w-full">Apply</button>

      <!-- Thương hiệu -->
      <label class="block mt-4">Brand</label>
      <select [(ngModel)]="selectedBrand" (change)="onFilterChange()" class="w-full p-2 border rounded">
        <option value="">All</option>
        <option *ngFor="let brand of brands" [value]="brand">{{ brand }}</option>
      </select>

      <!-- Dung tích rượu -->
      <label class="block mt-4">Wine Volume</label>
      <select [(ngModel)]="selectedWineVolume" (change)="onFilterChange()" class="w-full p-2 border rounded">
        <option value="">All</option>
        <option *ngFor="let volume of wineVolumes" [value]="volume">{{ volume }}</option>
      </select>

      <!-- Loại rượu -->
      <label class="block mt-4">Wine Type</label>
      <select [(ngModel)]="selectedWineType" (change)="onFilterChange()" class="w-full p-2 border rounded">
        <option value="">All</option>
        <option *ngFor="let type of wineTypes" [value]="type">{{ type }}</option>
      </select>

      <!-- Bộ lọc khác -->
      <label class="block mt-4">
        <input type="checkbox" [(ngModel)]="filters.bestSellers" (change)="onFilterChange()"> Best Sellers
      </label>
      <label class="block">
        <input type="checkbox" [(ngModel)]="filters.onSale" (change)="onFilterChange()"> On Sale
      </label>
    </div>

    <!-- Danh sách sản phẩm -->
    <div class="w-full md:w-3/4">
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
        <div *ngFor="let product of products" class="border rounded-lg p-4 shadow-md">
          <div class="w-full h-48 flex justify-center items-center">
            <!-- Nếu có ảnh -->
            <img *ngIf="product.ProductImageCover" [src]="product.ProductImageCover" alt="{{product.ProductName}}" class="w-full h-48 object-cover rounded">
        
            <!-- Nếu không có ảnh, hiển thị Lottie Animation -->
            <dotlottie-player *ngIf="!product.ProductImageCover" src="https://lottie.host/f62b020c-2aba-48ab-b6fa-f7ff027a01b1/cV8tropjc9.lottie" background="transparent" speed="1" style="width: 150px; height: 150px" loop autoplay></dotlottie-player>
          </div>
          <h3 class="text-lg font-semibold mt-2">{{product.ProductName}}</h3>
          <p class="text-xl font-bold text-red-500">{{product.ProductPrice | currency:'VND'}}</p>
          <p class="text-sm text-gray-600">Brand: {{product.ProductBrand}}</p>
          <button (click)="addToCart(product)" class="mt-2 bg-blue-500 text-white p-2 rounded w-full">Add to Cart</button>
          <button (click)="addToCompare(product)" class="mt-2 bg-green-500 text-white p-2 rounded w-full">Add to Compare</button>
        </div>
      </div>

      <!-- Phân trang -->
      <div class="mt-4 flex justify-center">
        <button *ngIf="pagination.currentPage > 1" (click)="onPageChange(pagination.currentPage - 1)" class="px-3 py-1 bg-gray-200 rounded">Previous</button>
        <button *ngFor="let page of getPageNumbers()" (click)="onPageChange(page)" class="px-3 py-1 bg-gray-200 rounded mx-1">{{page}}</button>
        <button *ngIf="pagination.currentPage < pagination.totalPages" (click)="onPageChange(pagination.currentPage + 1)" class="px-3 py-1 bg-gray-200 rounded">Next</button>
      </div>
    </div>
  </div>
</div>
