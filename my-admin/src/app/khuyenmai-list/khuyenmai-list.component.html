<div class="font-inter bg-gray-100 text-gray-800">
  <header class="flex justify-between items-center mb-6">
      <h1 class="text-3xl font-bold text-[#B16628]">Danh sách khuyến mãi</h1>
      <div class="relative">
          <select [(ngModel)]="currentRole" (change)="changePage(currentRole)"
              class="bg-transparent text-[#B16628] border-none focus:ring-0 focus:outline-none hover:text-[#F8BC3B] appearance-none">
              <option value="admin" class="text-[#B16628] hover:text-[#85461F]">Admin</option>
              <option value="customer" class="text-[#B16628] hover:text-[#85461F]">Customer</option>
          </select>
      </div>
  </header>

  <div class="flex justify-end mb-4">
      <button (click)="openCreatePromotion()" class="bg-[#F8BC3B] text-white px-4 py-2 rounded-md hover:opacity-90">
          + Thêm khuyến mãi
      </button>
  </div>

  <section>
      <div class="bg-[#F2E8DA] p-4 rounded-md mb-6">
          <div class="flex space-x-4">
              <!-- Input điều kiện lọc -->
              <input type="text" [(ngModel)]="filterCondition" (input)="applyFilter()"
                  class="w-1/3 border border-gray-300 rounded-md px-4 py-2" placeholder="Điều kiện lọc...">

              <!-- Input tìm kiếm khuyến mãi -->
              <input type="text" [(ngModel)]="searchKeyword"
                  class="flex-1 border border-gray-300 rounded-md px-4 py-2" placeholder="Tìm kiếm khuyến mãi...">

              <!-- Nút tìm kiếm -->
              <button (click)="search()" class="px-4 py-2 bg-[#D8A850] text-white rounded-md hover:opacity-90">
                  Tìm kiếm
              </button>
          </div>
      </div>

      <!-- Hiển thị thông báo khi không có kết quả -->
      <div *ngIf="filteredPromotions.length === 0" class="text-center text-gray-500 mt-4">
          <p>Không tìm thấy khuyến mãi nào.</p>
      </div>

      <!-- Hiển thị bảng chỉ khi có dữ liệu -->
      <table *ngIf="filteredPromotions.length > 0" class="w-full border-collapse">
          <thead class="bg-[#D8A850] text-white font-bold">
              <tr>
                  <th class="p-4">
                      <input type="checkbox" [checked]="selectAllChecked" (change)="toggleSelectAll()">
                  </th>
                  <th class="p-4">Khuyến mãi</th>
                  <th class="p-4">Mã khuyến mãi</th>
                  <th class="p-4">Trạng thái</th>
                  <th class="p-4">Số lượng</th>
                  <th class="p-4">Hành động</th>
              </tr>
          </thead>
          <tbody>
              <tr *ngFor="let promotion of filteredPromotions" class="promo-row bg-white hover:bg-gray-100">
                  <td class="p-4 text-center">
                      <input type="checkbox" [checked]="promotion.selected"
                          (change)="togglePromoSelection(promotion)">
                  </td>
                  <td class="p-4 text-center">
                      <div class="flex flex-col items-center">
                          <div>{{promotion.name}}</div>
                          <div class="text-gray-500 text-sm">{{promotion.startDate}}</div>
                      </div>
                  </td>
                  <td class="p-4 text-center">{{promotion._id}}</td>
                  <td class="p-4 text-center">{{promotion.status}}</td>
                  <td class="p-4 text-center">{{promotion.quantity}}</td>
                  <td class="px-6 py-4 text-center">
                      <div class="flex justify-center space-x-4 items-center">
                          <button (click)="confirmDelete(promotion)" class="flex items-center">
                              <img src="assets/images/trash-icon.png" alt="Xóa" class="w-6 h-6">
                          </button>
                          <button (click)="goToPromotionDetail(promotion)"
                              class="text-red-500 hover:text-red-700">
                              <img src="assets/images/edit-icon.png" alt="Sửa" class="w-6 h-6">
                          </button>
                      </div>
                  </td>
              </tr>
          </tbody>
      </table>

      <div class="mt-6 flex justify-between items-center">
          <div class="relative inline-block text-left">
              <select [(ngModel)]="displayQuantity"
                  class="px-4 py-2 bg-[#D8A850] text-white rounded-md focus:outline-none">
                  <option [value]="20">Hiển thị 20</option>
                  <option [value]="50">Hiển thị 50</option>
              </select>
          </div>
          <div class="text-right">
              <span class="text-gray-600 text-right">Tổng khuyến mãi: {{promotions.length}}</span>
          </div>
      </div>
  </section>

  <!-- Pop-up xác nhận xóa -->
  <div *ngIf="isDeletePopupVisible" class="fixed inset-0 bg-[#F2E8DA] bg-opacity-50 flex items-center justify-center">
      <div class="bg-white p-6 rounded-lg shadow-xl">
          <p class="mb-4 text-center">Xác nhận xóa khuyến mãi <span class="font-bold">{{ promotionToDelete?.code }}</span> này?</p>
          <div class="flex justify-center space-x-4">
              <button (click)="deletePromotion()" class="px-4 py-2 bg-[#F8BC3B] text-white rounded-md">Xóa</button>
              <button (click)="closeDeletePopup()" class="px-4 py-2 bg-gray-300 rounded-md">Hủy</button>
          </div>
      </div>
  </div>
</div>
